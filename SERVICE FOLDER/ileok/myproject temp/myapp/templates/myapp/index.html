<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>My Prediction App</title>
    <style>
        #result {
            border: 1px solid black;
            overflow: auto;
            padding: 10px;
            white-space: pre-wrap;
        }
        table {
            border-collapse: collapse;
            width: 100%;
        }
        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>Upload your txt file</h1>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form }}
        <button type="submit">Upload</button>
    </form>
    <div id="result"></div>

    <script>
        // 결과 출력을 위한 JavaScript 코드를 작성하세요.
        const form = document.querySelector('form');
        form.addEventListener('submit', async (event) => {
            event.preventDefault();

            const formData = new FormData(form);
            const response = await fetch('/', {
                method: 'POST',
                body: formData,
            });
            const data = await response.json();
            const result = data.result;

            const resultDiv = document.querySelector('#result');
            resultDiv.innerHTML = generateTable(result);
        });

        function generateTable(result) {
            let table = '<table>';
            for (let row = 0; row < result.length; row++) {
                table += '<tr>';
                for (let col = 0; col < result[row].length; col++) {
                    table += '<td>' + result[row][col] + '</td>';
                }
                table += '</tr>';
            }
            table += '</table>';
            return table;
        }
    </script>
</body>
</html>